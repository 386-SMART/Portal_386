/* ================================
   SETUP GENERAL Y VARIABLES
   ================================ */
:root{
  --page-bg:#f3f4f6;
  --card-bg:#ffffff;
  --primary-color:#4f46e5;
  --primary-hover:#4338ca;
  --text-dark:#111827;
  --text-muted:#6b7280;
  --border-color:#e5e7eb;
  --light-grey:#f9fafb;
  --shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);
}

body{
  font-family:'Poppins',sans-serif;
  background-color:var(--page-bg);
  color:var(--text-dark);
  margin:0;
}

/* ================================
   LAYOUT PRINCIPAL (GRID)
   ================================ */
.page-container{
  display:grid;
  grid-template-columns:1fr 340px;
  grid-template-rows:auto 1fr;
  grid-template-areas:
    "header header"
    "main   sidebar";
  gap:1.5rem;
  padding:1.5rem;
  min-height:100vh;
}

.page-header{
  grid-area:header;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding-inline:.25rem;
}
.page-header h1{
  font-size:1.75rem;
  font-weight:700;
  margin:0;
}
.page-header .header-actions .btn{ padding-inline:1rem; }

.main-content{ grid-area:main; }
.main-content-card{
  background-color:var(--card-bg);
  border-radius:.75rem;
  border:1px solid var(--border-color);
  box-shadow:var(--shadow-sm);
  height:100%;
  overflow:hidden;
}

.sidebar{
  grid-area:sidebar;
  background-color:var(--card-bg);
  padding:1.5rem;
  border-radius:.75rem;
  border:1px solid var(--border-color);
  box-shadow:var(--shadow-sm);
  height:fit-content;
}
/* sticky en desktop */
.sticky-sidebar{ position:sticky; top:1.25rem; }

/* ================================
   COMPONENTES
   ================================ */

/* Tabs */
.nav-tabs{
  border-bottom:1px solid var(--border-color);
  padding:0 1.5rem;
}
.nav-tabs .nav-item{ margin-bottom:-1px; }
.nav-tabs .nav-link{
  border:none;
  border-bottom:2px solid transparent;
  color:var(--text-muted);
  font-weight:500;
  padding:1rem .5rem;
  margin:0 1rem;
}
.nav-tabs .nav-link.active{
  color:var(--primary-color);
  border-bottom-color:var(--primary-color);
  background:none;
}
.nav-tabs .nav-link .tab-icon{ opacity:.6; transition:opacity .2s ease; }
.nav-tabs .nav-link.active .tab-icon{ opacity:1; }

.tab-content{ padding:1.5rem; }

/* Encabezado dentro de tabs */
.tab-header{ margin-bottom:1.5rem; }
.tab-header h2{ font-size:1.25rem; font-weight:600; }

/* Formularios */
.form-label{ font-weight:500; font-size:.875rem; }
.form-control,.form-select{ border-color:#d1d5db; border-radius:.5rem; }
.form-control:focus,.form-select:focus{
  border-color:var(--primary-color);
  box-shadow:0 0 0 1px var(--primary-color);
}
.input-group>.form-control{ border-right:0; }
.input-group .btn{ border-left:0; }

.btn-primary{ background-color:var(--primary-color); border-color:var(--primary-color); }
.btn-primary:hover{ background-color:var(--primary-hover); border-color:var(--primary-hover); }
.btn-light{ background-color:#fff; border-color:#d1d5db; }

/* Panel lateral (Sidebar) */
.sidebar h5{
  font-weight:600; font-size:1.1rem; display:flex; align-items:center; gap:.5rem;
}
.sidebar .sidebar-list{
  list-style:none; padding:0; margin-top:1.5rem;
  display:flex; flex-direction:column; gap:1.25rem;
}
.sidebar .sidebar-list li{
  display:flex; align-items:flex-start; gap:.75rem;
  font-size:.9rem; color:var(--text-muted); line-height:1.6;
}
.sidebar .sidebar-list i{ color:var(--primary-color); font-size:1.1rem; margin-top:.2rem; }

/* ========= Sección de Alertas ========= */
.alerts-grid{
  display:grid;
  grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);
  gap:2rem;
}

.form-section,
.list-section,
.workflow-card{
  background:#fff;
  border:1px solid var(--border-color);
  border-radius:.75rem;
  padding:1.25rem;
  box-shadow:var(--shadow-sm);
}

.form-section-title{
  font-size:1.1rem;
  font-weight:600;
  padding-bottom:.75rem;
  margin-bottom:1.5rem;
  border-bottom:1px solid var(--border-color);
}

/* Lista de alertas */
.alert-list-container{
  max-height:62vh;
  overflow:auto;
  padding-right:.25rem;
}

/* Tarjetas de alerta */
.alert-card{
  border:1px solid var(--border-color);
  border-radius:.75rem;
  overflow:hidden;
  margin-bottom:1rem;
  background-color:var(--card-bg);
}
.alert-card-header{
  display:flex; justify-content:space-between; align-items:center;
  gap:.75rem; padding:.9rem 1rem; background:var(--light-grey);
  border-bottom:1px solid var(--border-color);
}
.alert-card-title{ margin:0; font-weight:600; }
.alert-card-body{ padding:1rem; color:var(--text-dark); }
.alert-card-body p{ margin-bottom:.5rem; }
.alert-card-body .meta{
  display:grid; gap:.25rem; font-size:.85rem; color:var(--text-muted);
}
.alert-card-body .meta code{
  background:#f8fafc; color:#475569;
  padding:.1rem .5rem; border-radius:999px; border:1px solid var(--border-color);
}
.alert-card-footer{
  padding:.75rem 1rem; background:#fafafa; border-top:1px solid var(--border-color);
  display:flex; justify-content:flex-end; gap:.5rem;
}

/* Badges suaves para severidad */
.badge-soft-primary{ background:#eef2ff; color:#4338ca; border:1px solid #e0e7ff; }
.badge-soft-warning{ background:#fff7ed; color:#b45309; border:1px solid #ffedd5; }
.badge-soft-danger { background:#fee2e2; color:#b91c1c; border:1px solid #fecaca; }

/* Contador de empresas seleccionadas */
#al-selected-count{
  background:#eef2ff; border:1px solid #e0e7ff; color:#4338ca;
  padding:.1rem .45rem; border-radius:.5rem;
}

/* Estado vacío / ayuda */
.empty-state{
  border:1px dashed var(--border-color);
  border-radius:.75rem; padding:2rem;
  text-align:center; color:var(--text-muted); background:#fff;
}
.empty-state i{ font-size:1.4rem; display:block; margin-bottom:.5rem; }

/* ========= Tom Select ========= */
.ts-wrapper .ts-control{
  border-radius:.375rem;
  border-color:#d1d5db;
  padding-top:.4rem; padding-bottom:.4rem;
  box-shadow:none !important;
  transition:border-color .15s ease-in-out, box-shadow .15s ease-in-out;
}
.ts-wrapper.focus .ts-control{
  border-color:var(--primary-color);
  box-shadow:0 0 0 1px var(--primary-color) !important;
}
.ts-dropdown{
  border:1px solid var(--border-color);
  border-radius:.5rem;
  box-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  margin-top:.25rem;
}
.ts-dropdown .option{ padding:.6rem 1rem; font-size:.9rem; }
.ts-dropdown .option:hover,.ts-dropdown .active{
  background-color:#eef2ff; color:var(--primary-color);
}
.ts-dropdown .create{ color:var(--text-dark); font-weight:500; }

/* ========= Modales ========= */
.modal-content{
  border:none; border-radius:.75rem;
  box-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -4px rgb(0 0 0 / 0.1);
}
.modal-header{ border-bottom:1px solid var(--border-color); padding:1rem 1.5rem; }
.modal-header .modal-title{ font-weight:600; }
.modal-body{ padding:1.5rem; }
.modal-footer{
  border-top:1px solid var(--border-color);
  background-color:var(--light-grey);
  padding:1rem 1.5rem;
}

/* Modal: Elegir empresas */
.company-list{
  max-height:400px; overflow-y:auto;
  border:1px solid var(--border-color); border-radius:.5rem;
}
.company-list .list-group-item{ padding:0; border:none; border-bottom:1px solid var(--border-color); }
.company-list .list-group-item:last-child{ border-bottom:none; }
.company-list .list-group-item label{
  display:flex; align-items:center; gap:.75rem;
  padding:.75rem 1rem; width:100%; cursor:pointer;
}
.company-list .list-group-item label:hover{ background-color:var(--light-grey); }
.company-list .form-check-input{ border-color:#b0b5c0; margin-top:0; transform:translateY(1px); }
.company-list .form-check-input:checked{ background-color:var(--primary-color); border-color:var(--primary-color); }
.company-list .form-check-input:focus{ box-shadow:0 0 0 .25rem rgb(79 70 229 / 25%); }

/* ========= Micro-interacciones ========= */
/* Skeletons */
.skeleton{
  position:relative; overflow:hidden; background:#f1f5f9; border-radius:.5rem;
}
.skeleton::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.7) 50%, rgba(255,255,255,0) 100%);
  transform:translateX(-100%); animation:shimmer 1.2s infinite;
}
@keyframes shimmer{ 100%{ transform:translateX(100%); } }

/* Botones en loading */
.btn-loading{ position:relative; pointer-events:none; }
.btn-loading::after{
  content:""; width:1rem; height:1rem; border-radius:50%;
  border:2px solid rgba(255,255,255,.4); border-top-color:#fff;
  animation:spin .6s linear infinite; display:inline-block; margin-left:.5rem;
}
@keyframes spin{ to{ transform:rotate(360deg); } }

/* ================================
   RESPONSIVIDAD
   ================================ */
@media (max-width:1200px){
  .page-container{
    grid-template-columns:1fr;
    grid-template-areas:
      "header"
      "main"
      "sidebar";
  }
}
@media (max-width:992px){
  .alerts-grid{ grid-template-columns:1fr; }
  .form-section, .list-section, .workflow-card{ padding:1rem; }
}
@media (max-width:768px){
  .page-container{ padding:1rem; gap:1rem; }
  .page-header{ flex-direction:column; align-items:flex-start; gap:1rem; }
  .nav-tabs .nav-link{ margin:0 .5rem; padding:.75rem .25rem; }
}
